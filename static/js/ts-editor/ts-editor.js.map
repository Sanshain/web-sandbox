{"version":3,"file":"ts-editor.js","sources":["../scripts/utils.ts","../scripts/lib/ace/range.js","../scripts/lib/ace/lib/event_emitter.js","../scripts/lib/ace/lib/regexp.js","../scripts/AutoCompleteView.ts","../scripts/lib/ace/lib/es5-shim.js","../scripts/lib/ace/lib/oop.js","../scripts/lib/ace/lib/keys.js","../scripts/lib/ace/keyboard/hash_handler.js","../scripts/lib/ace/lib/useragent.js","../scripts/AutoComplete.ts","../scripts/EditorPosition.ts","../scripts/lib/ace/mode/typescript/languageServiceHost.ts","../scripts/lib/ace/mode/typescript/tsProject.ts","../scripts/CompletionService.ts","../scripts/editor.ts","../scripts/lib/ace/lib/lang.js"],"sourcesContent":[null,"/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\r\n    \"use strict\";\r\n\r\n    var comparePoints = function(p1, p2) {\r\n        return p1.row - p2.row || p1.column - p2.column;\r\n    };\r\n    /**\r\n     * This object is used in various places to indicate a region within the editor. To better visualize how this works, imagine a rectangle. Each quadrant of the rectangle is analogus to a range, as ranges contain a starting row and starting column, and an ending row, and ending column.\r\n     * @class Range\r\n     **/\r\n\r\n    /**\r\n     * Creates a new `Range` object with the given starting and ending row and column points.\r\n     * @param {Number} startRow The starting row\r\n     * @param {Number} startColumn The starting column\r\n     * @param {Number} endRow The ending row\r\n     * @param {Number} endColumn The ending column\r\n     *\r\n     * @constructor\r\n     **/\r\n    var Range = function(startRow, startColumn, endRow, endColumn) {\r\n        this.start = {\r\n            row: startRow,\r\n            column: startColumn\r\n        };\r\n\r\n        this.end = {\r\n            row: endRow,\r\n            column: endColumn\r\n        };\r\n    };\r\n\r\n    (function() {\r\n        /**\r\n         * Returns `true` if and only if the starting row and column, and ending row and column, are equivalent to those given by `range`.\r\n         * @param {Range} range A range to check against\r\n         *\r\n         * @return {Boolean}\r\n         **/\r\n        this.isEqual = function(range) {\r\n            return this.start.row === range.start.row &&\r\n                this.end.row === range.end.row &&\r\n                this.start.column === range.start.column &&\r\n                this.end.column === range.end.column;\r\n        };\r\n\r\n        /**\r\n         *\r\n         * Returns a string containing the range's row and column information, given like this:\r\n         * ```\r\n         *    [start.row/start.column] -> [end.row/end.column]\r\n         * ```\r\n         * @return {String}\r\n         **/\r\n        this.toString = function() {\r\n            return (\"Range: [\" + this.start.row + \"/\" + this.start.column +\r\n                \"] -> [\" + this.end.row + \"/\" + this.end.column + \"]\");\r\n        };\r\n\r\n        /**\r\n         *\r\n         * Returns `true` if the `row` and `column` provided are within the given range. This can better be expressed as returning `true` if:\r\n         * ```javascript\r\n         *    this.start.row <= row <= this.end.row &&\r\n         *    this.start.column <= column <= this.end.column\r\n         * ```\r\n         * @param {Number} row A row to check for\r\n         * @param {Number} column A column to check for\r\n         * @returns {Boolean}\r\n         * @related Range.compare\r\n         **/\r\n\r\n        this.contains = function(row, column) {\r\n            return this.compare(row, column) == 0;\r\n        };\r\n\r\n        /**\r\n         * Compares `this` range (A) with another range (B).\r\n         * @param {Range} range A range to compare with\r\n         *\r\n         * @related Range.compare\r\n         * @returns {Number} This method returns one of the following numbers:<br/>\r\n         * <br/>\r\n         * * `-2`: (B) is in front of (A), and doesn't intersect with (A)<br/>\r\n         * * `-1`: (B) begins before (A) but ends inside of (A)<br/>\r\n         * * `0`: (B) is completely inside of (A) OR (A) is completely inside of (B)<br/>\r\n         * * `+1`: (B) begins inside of (A) but ends outside of (A)<br/>\r\n         * * `+2`: (B) is after (A) and doesn't intersect with (A)<br/>\r\n         * * `42`: FTW state: (B) ends in (A) but starts outside of (A)\r\n         **/\r\n        this.compareRange = function(range) {\r\n            var cmp,\r\n                end = range.end,\r\n                start = range.start;\r\n\r\n            cmp = this.compare(end.row, end.column);\r\n            if (cmp == 1) {\r\n                cmp = this.compare(start.row, start.column);\r\n                if (cmp == 1) {\r\n                    return 2;\r\n                } else if (cmp == 0) {\r\n                    return 1;\r\n                } else {\r\n                    return 0;\r\n                }\r\n            } else if (cmp == -1) {\r\n                return -2;\r\n            } else {\r\n                cmp = this.compare(start.row, start.column);\r\n                if (cmp == -1) {\r\n                    return -1;\r\n                } else if (cmp == 1) {\r\n                    return 42;\r\n                } else {\r\n                    return 0;\r\n                }\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Checks the row and column points of `p` with the row and column points of the calling range.\r\n         *\r\n         * @param {Range} p A point to compare with\r\n         *\r\n         * @related Range.compare\r\n         * @returns {Number} This method returns one of the following numbers:<br/>\r\n         * * `0` if the two points are exactly equal<br/>\r\n         * * `-1` if `p.row` is less then the calling range<br/>\r\n         * * `1` if `p.row` is greater than the calling range<br/>\r\n         * <br/>\r\n         * If the starting row of the calling range is equal to `p.row`, and:<br/>\r\n         * * `p.column` is greater than or equal to the calling range's starting column, this returns `0`<br/>\r\n         * * Otherwise, it returns -1<br/>\r\n         *<br/>\r\n        * If the ending row of the calling range is equal to `p.row`, and:<br/>\r\n        * * `p.column` is less than or equal to the calling range's ending column, this returns `0`<br/>\r\n        * * Otherwise, it returns 1<br/>\r\n        **/\r\n        this.comparePoint = function(p) {\r\n            return this.compare(p.row, p.column);\r\n        };\r\n\r\n        /**\r\n         * Checks the start and end points of `range` and compares them to the calling range. Returns `true` if the `range` is contained within the caller's range.\r\n         * @param {Range} range A range to compare with\r\n         *\r\n         * @returns {Boolean}\r\n         * @related Range.comparePoint\r\n         **/\r\n        this.containsRange = function(range) {\r\n            return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;\r\n        };\r\n\r\n        /**\r\n         * Returns `true` if passed in `range` intersects with the one calling this method.\r\n         * @param {Range} range A range to compare with\r\n         *\r\n         * @returns {Boolean}\r\n         **/\r\n        this.intersects = function(range) {\r\n            var cmp = this.compareRange(range);\r\n            return (cmp == -1 || cmp == 0 || cmp == 1);\r\n        };\r\n\r\n        /**\r\n         * Returns `true` if the caller's ending row point is the same as `row`, and if the caller's ending column is the same as `column`.\r\n         * @param {Number} row A row point to compare with\r\n         * @param {Number} column A column point to compare with\r\n         *\r\n         * @returns {Boolean}\r\n         **/\r\n        this.isEnd = function(row, column) {\r\n            return this.end.row == row && this.end.column == column;\r\n        };\r\n\r\n        /**\r\n         * Returns `true` if the caller's starting row point is the same as `row`, and if the caller's starting column is the same as `column`.\r\n         * @param {Number} row A row point to compare with\r\n         * @param {Number} column A column point to compare with\r\n         *\r\n         * @returns {Boolean}\r\n         **/\r\n        this.isStart = function(row, column) {\r\n            return this.start.row == row && this.start.column == column;\r\n        };\r\n\r\n        /**\r\n         * Sets the starting row and column for the range.\r\n         * @param {Number} row A row point to set\r\n         * @param {Number} column A column point to set\r\n         *\r\n         **/\r\n        this.setStart = function(row, column) {\r\n            if (typeof row == \"object\") {\r\n                this.start.column = row.column;\r\n                this.start.row = row.row;\r\n            } else {\r\n                this.start.row = row;\r\n                this.start.column = column;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Sets the starting row and column for the range.\r\n         * @param {Number} row A row point to set\r\n         * @param {Number} column A column point to set\r\n         *\r\n         **/\r\n        this.setEnd = function(row, column) {\r\n            if (typeof row == \"object\") {\r\n                this.end.column = row.column;\r\n                this.end.row = row.row;\r\n            } else {\r\n                this.end.row = row;\r\n                this.end.column = column;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Returns `true` if the `row` and `column` are within the given range.\r\n         * @param {Number} row A row point to compare with\r\n         * @param {Number} column A column point to compare with\r\n         *\r\n         *\r\n         * @returns {Boolean}\r\n         * @related Range.compare\r\n         **/\r\n        this.inside = function(row, column) {\r\n            if (this.compare(row, column) == 0) {\r\n                if (this.isEnd(row, column) || this.isStart(row, column)) {\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n\r\n        /**\r\n         * Returns `true` if the `row` and `column` are within the given range's starting points.\r\n         * @param {Number} row A row point to compare with\r\n         * @param {Number} column A column point to compare with\r\n         *\r\n         * @returns {Boolean}\r\n         * @related Range.compare\r\n         **/\r\n        this.insideStart = function(row, column) {\r\n            if (this.compare(row, column) == 0) {\r\n                if (this.isEnd(row, column)) {\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n\r\n        /**\r\n         * Returns `true` if the `row` and `column` are within the given range's ending points.\r\n         * @param {Number} row A row point to compare with\r\n         * @param {Number} column A column point to compare with\r\n         *\r\n         * @returns {Boolean}\r\n         * @related Range.compare\r\n         *\r\n         **/\r\n        this.insideEnd = function(row, column) {\r\n            if (this.compare(row, column) == 0) {\r\n                if (this.isStart(row, column)) {\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n\r\n        /**\r\n         * Checks the row and column points with the row and column points of the calling range.\r\n         * @param {Number} row A row point to compare with\r\n         * @param {Number} column A column point to compare with\r\n         *\r\n         *\r\n         * @returns {Number} This method returns one of the following numbers:<br/>\r\n         * `0` if the two points are exactly equal <br/>\r\n         * `-1` if `p.row` is less then the calling range <br/>\r\n         * `1` if `p.row` is greater than the calling range <br/>\r\n         *  <br/>\r\n         * If the starting row of the calling range is equal to `p.row`, and: <br/>\r\n         * `p.column` is greater than or equal to the calling range's starting column, this returns `0`<br/>\r\n         * Otherwise, it returns -1<br/>\r\n         * <br/>\r\n         * If the ending row of the calling range is equal to `p.row`, and: <br/>\r\n         * `p.column` is less than or equal to the calling range's ending column, this returns `0` <br/>\r\n         * Otherwise, it returns 1\r\n         **/\r\n        this.compare = function(row, column) {\r\n            if (!this.isMultiLine()) {\r\n                if (row === this.start.row) {\r\n                    return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);\r\n                };\r\n            }\r\n\r\n            if (row < this.start.row)\r\n                return -1;\r\n\r\n            if (row > this.end.row)\r\n                return 1;\r\n\r\n            if (this.start.row === row)\r\n                return column >= this.start.column ? 0 : -1;\r\n\r\n            if (this.end.row === row)\r\n                return column <= this.end.column ? 0 : 1;\r\n\r\n            return 0;\r\n        };\r\n\r\n        /**\r\n         * Checks the row and column points with the row and column points of the calling range.\r\n         * @param {Number} row A row point to compare with\r\n         * @param {Number} column A column point to compare with\r\n         *\r\n         * @returns {Number} This method returns one of the following numbers:<br/>\r\n         * <br/>\r\n         * `0` if the two points are exactly equal<br/>\r\n         * `-1` if `p.row` is less then the calling range<br/>\r\n         * `1` if `p.row` is greater than the calling range, or if `isStart` is `true`.<br/>\r\n         * <br/>\r\n         * If the starting row of the calling range is equal to `p.row`, and:<br/>\r\n         * `p.column` is greater than or equal to the calling range's starting column, this returns `0`<br/>\r\n         * Otherwise, it returns -1<br/>\r\n         * <br/>\r\n         * If the ending row of the calling range is equal to `p.row`, and:<br/>\r\n         * `p.column` is less than or equal to the calling range's ending column, this returns `0`<br/>\r\n         * Otherwise, it returns 1\r\n         *\r\n         **/\r\n        this.compareStart = function(row, column) {\r\n            if (this.start.row == row && this.start.column == column) {\r\n                return -1;\r\n            } else {\r\n                return this.compare(row, column);\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Checks the row and column points with the row and column points of the calling range.\r\n         * @param {Number} row A row point to compare with\r\n         * @param {Number} column A column point to compare with\r\n         *\r\n         *\r\n         * @returns {Number} This method returns one of the following numbers:<br/>\r\n         * `0` if the two points are exactly equal<br/>\r\n         * `-1` if `p.row` is less then the calling range<br/>\r\n         * `1` if `p.row` is greater than the calling range, or if `isEnd` is `true.<br/>\r\n         * <br/>\r\n         * If the starting row of the calling range is equal to `p.row`, and:<br/>\r\n         * `p.column` is greater than or equal to the calling range's starting column, this returns `0`<br/>\r\n         * Otherwise, it returns -1<br/>\r\n         *<br/>\r\n        * If the ending row of the calling range is equal to `p.row`, and:<br/>\r\n        * `p.column` is less than or equal to the calling range's ending column, this returns `0`<br/>\r\n        * Otherwise, it returns 1\r\n        */\r\n        this.compareEnd = function(row, column) {\r\n            if (this.end.row == row && this.end.column == column) {\r\n                return 1;\r\n            } else {\r\n                return this.compare(row, column);\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Checks the row and column points with the row and column points of the calling range.\r\n         * @param {Number} row A row point to compare with\r\n         * @param {Number} column A column point to compare with\r\n         *\r\n         *\r\n         * @returns {Number} This method returns one of the following numbers:<br/>\r\n         * * `1` if the ending row of the calling range is equal to `row`, and the ending column of the calling range is equal to `column`<br/>\r\n         * * `-1` if the starting row of the calling range is equal to `row`, and the starting column of the calling range is equal to `column`<br/>\r\n         * <br/>\r\n         * Otherwise, it returns the value after calling [[Range.compare `compare()`]].\r\n         *\r\n         **/\r\n        this.compareInside = function(row, column) {\r\n            if (this.end.row == row && this.end.column == column) {\r\n                return 1;\r\n            } else if (this.start.row == row && this.start.column == column) {\r\n                return -1;\r\n            } else {\r\n                return this.compare(row, column);\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Returns the part of the current `Range` that occurs within the boundaries of `firstRow` and `lastRow` as a new `Range` object.\r\n         * @param {Number} firstRow The starting row\r\n         * @param {Number} lastRow The ending row\r\n         *\r\n         *\r\n         * @returns {Range}\r\n        **/\r\n        this.clipRows = function(firstRow, lastRow) {\r\n            if (this.end.row > lastRow)\r\n                var end = {row: lastRow + 1, column: 0};\r\n            else if (this.end.row < firstRow)\r\n                var end = {row: firstRow, column: 0};\r\n\r\n            if (this.start.row > lastRow)\r\n                var start = {row: lastRow + 1, column: 0};\r\n            else if (this.start.row < firstRow)\r\n                var start = {row: firstRow, column: 0};\r\n\r\n            return Range.fromPoints(start || this.start, end || this.end);\r\n        };\r\n\r\n        /**\r\n         * Changes the row and column points for the calling range for both the starting and ending points.\r\n         * @param {Number} row A new row to extend to\r\n         * @param {Number} column A new column to extend to\r\n         *\r\n         *\r\n         * @returns {Range} The original range with the new row\r\n        **/\r\n        this.extend = function(row, column) {\r\n            var cmp = this.compare(row, column);\r\n\r\n            if (cmp == 0)\r\n                return this;\r\n            else if (cmp == -1)\r\n                var start = {row: row, column: column};\r\n            else\r\n                var end = {row: row, column: column};\r\n\r\n            return Range.fromPoints(start || this.start, end || this.end);\r\n        };\r\n\r\n        this.isEmpty = function() {\r\n            return (this.start.row === this.end.row && this.start.column === this.end.column);\r\n        };\r\n\r\n        /**\r\n         *\r\n         * Returns `true` if the range spans across multiple lines.\r\n         * @returns {Boolean}\r\n        **/\r\n        this.isMultiLine = function() {\r\n            return (this.start.row !== this.end.row);\r\n        };\r\n\r\n        /**\r\n         *\r\n         * Returns a duplicate of the calling range.\r\n         * @returns {Range}\r\n        **/\r\n        this.clone = function() {\r\n            return Range.fromPoints(this.start, this.end);\r\n        };\r\n\r\n        /**\r\n         *\r\n         * Returns a range containing the starting and ending rows of the original range, but with a column value of `0`.\r\n         * @returns {Range}\r\n        **/\r\n        this.collapseRows = function() {\r\n            if (this.end.column == 0)\r\n                return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row-1), 0)\r\n            else\r\n                return new Range(this.start.row, 0, this.end.row, 0)\r\n        };\r\n\r\n        /**\r\n         * Given the current `Range`, this function converts those starting and ending points into screen positions, and then returns a new `Range` object.\r\n         * @param {EditSession} session The `EditSession` to retrieve coordinates from\r\n         *\r\n         *\r\n         * @returns {Range}\r\n        **/\r\n        this.toScreenRange = function(session) {\r\n            var screenPosStart = session.documentToScreenPosition(this.start);\r\n            var screenPosEnd = session.documentToScreenPosition(this.end);\r\n\r\n            return new Range(\r\n                screenPosStart.row, screenPosStart.column,\r\n                screenPosEnd.row, screenPosEnd.column\r\n            );\r\n        };\r\n        \r\n        \r\n        /* experimental */\r\n        this.moveBy = function(row, column) {\r\n            this.start.row += row;\r\n            this.start.column += column;\r\n            this.end.row += row;\r\n            this.end.column += column;\r\n        };\r\n\r\n    }).call(Range.prototype);\r\n\r\n    /**\r\n     * Creates and returns a new `Range` based on the row and column of the given parameters.\r\n     * @param {Range} start A starting point to use\r\n     * @param {Range} end An ending point to use\r\n     *\r\n     * @returns {Range}\r\n    **/\r\n    Range.fromPoints = function(start, end) {\r\n        return new Range(start.row, start.column, end.row, end.column);\r\n    };\r\n    Range.comparePoints = comparePoints;\r\n\r\n    Range.comparePoints = function(p1, p2) {\r\n        return p1.row - p2.row || p1.column - p2.column;\r\n    };\r\n\r\n    exports.Range = Range;\r\n    \r\n});\r\n","/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar EventEmitter = {};\r\nvar stopPropagation = function() { this.propagationStopped = true; };\r\nvar preventDefault = function() { this.defaultPrevented = true; };\r\n\r\nEventEmitter._emit =\r\nEventEmitter._dispatchEvent = function(eventName, e) {\r\n    this._eventRegistry || (this._eventRegistry = {});\r\n    this._defaultHandlers || (this._defaultHandlers = {});\r\n\r\n    var listeners = this._eventRegistry[eventName] || [];\r\n    var defaultHandler = this._defaultHandlers[eventName];\r\n    if (!listeners.length && !defaultHandler)\r\n        return;\r\n\r\n    if (typeof e != \"object\" || !e)\r\n        e = {};\r\n\r\n    if (!e.type)\r\n        e.type = eventName;\r\n    if (!e.stopPropagation)\r\n        e.stopPropagation = stopPropagation;\r\n    if (!e.preventDefault)\r\n        e.preventDefault = preventDefault;\r\n\r\n    listeners = listeners.slice();\r\n    for (var i=0; i<listeners.length; i++) {\r\n        listeners[i](e, this);\r\n        if (e.propagationStopped)\r\n            break;\r\n    }\r\n    \r\n    if (defaultHandler && !e.defaultPrevented)\r\n        return defaultHandler(e, this);\r\n};\r\n\r\n\r\nEventEmitter._signal = function(eventName, e) {\r\n    var listeners = (this._eventRegistry || {})[eventName];\r\n    if (!listeners)\r\n        return;\r\n    listeners = listeners.slice();\r\n    for (var i=0; i<listeners.length; i++)\r\n        listeners[i](e, this);\r\n};\r\n\r\nEventEmitter.once = function(eventName, callback) {\r\n    var _self = this;\r\n    callback && this.addEventListener(eventName, function newCallback() {\r\n        _self.removeEventListener(eventName, newCallback);\r\n        callback.apply(null, arguments);\r\n    });\r\n};\r\n\r\n\r\nEventEmitter.setDefaultHandler = function(eventName, callback) {\r\n    var handlers = this._defaultHandlers\r\n    if (!handlers)\r\n        handlers = this._defaultHandlers = {_disabled_: {}};\r\n    \r\n    if (handlers[eventName]) {\r\n        var old = handlers[eventName];\r\n        var disabled = handlers._disabled_[eventName];\r\n        if (!disabled)\r\n            handlers._disabled_[eventName] = disabled = [];\r\n        disabled.push(old);\r\n        var i = disabled.indexOf(callback);\r\n        if (i != -1) \r\n            disabled.splice(i, 1);\r\n    }\r\n    handlers[eventName] = callback;\r\n};\r\nEventEmitter.removeDefaultHandler = function(eventName, callback) {\r\n    var handlers = this._defaultHandlers\r\n    if (!handlers)\r\n        return;\r\n    var disabled = handlers._disabled_[eventName];\r\n    \r\n    if (handlers[eventName] == callback) {\r\n        var old = handlers[eventName];\r\n        if (disabled)\r\n            this.setDefaultHandler(eventName, disabled.pop());\r\n    } else if (disabled) {\r\n        var i = disabled.indexOf(callback);\r\n        if (i != -1)\r\n            disabled.splice(i, 1);\r\n    }\r\n};\r\n\r\nEventEmitter.on =\r\nEventEmitter.addEventListener = function(eventName, callback, capturing) {\r\n    this._eventRegistry = this._eventRegistry || {};\r\n\r\n    var listeners = this._eventRegistry[eventName];\r\n    if (!listeners)\r\n        listeners = this._eventRegistry[eventName] = [];\r\n\r\n    if (listeners.indexOf(callback) == -1)\r\n        listeners[capturing ? \"unshift\" : \"push\"](callback);\r\n    return callback;\r\n};\r\n\r\nEventEmitter.off =\r\nEventEmitter.removeListener =\r\nEventEmitter.removeEventListener = function(eventName, callback) {\r\n    this._eventRegistry = this._eventRegistry || {};\r\n\r\n    var listeners = this._eventRegistry[eventName];\r\n    if (!listeners)\r\n        return;\r\n\r\n    var index = listeners.indexOf(callback);\r\n    if (index !== -1)\r\n        listeners.splice(index, 1);\r\n};\r\n\r\nEventEmitter.removeAllListeners = function(eventName) {\r\n    if (this._eventRegistry) this._eventRegistry[eventName] = [];\r\n};\r\n\r\nexports.EventEmitter = EventEmitter;\r\n\r\n});\r\n","/*\r\n *  Based on code from:\r\n *\r\n * XRegExp 1.5.0\r\n * (c) 2007-2010 Steven Levithan\r\n * MIT License\r\n * <http://xregexp.com>\r\n * Provides an augmented, extensible, cross-browser implementation of regular expressions,\r\n * including support for additional syntax, flags, and methods\r\n */\r\n \r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\n    //---------------------------------\r\n    //  Private variables\r\n    //---------------------------------\r\n\r\n    var real = {\r\n            exec: RegExp.prototype.exec,\r\n            test: RegExp.prototype.test,\r\n            match: String.prototype.match,\r\n            replace: String.prototype.replace,\r\n            split: String.prototype.split\r\n        },\r\n        compliantExecNpcg = real.exec.call(/()??/, \"\")[1] === undefined, // check `exec` handling of nonparticipating capturing groups\r\n        compliantLastIndexIncrement = function () {\r\n            var x = /^/g;\r\n            real.test.call(x, \"\");\r\n            return !x.lastIndex;\r\n        }();\r\n\r\n    if (compliantLastIndexIncrement && compliantExecNpcg)\r\n        return;\r\n\r\n    //---------------------------------\r\n    //  Overriden native methods\r\n    //---------------------------------\r\n\r\n    // Adds named capture support (with backreferences returned as `result.name`), and fixes two\r\n    // cross-browser issues per ES3:\r\n    // - Captured values for nonparticipating capturing groups should be returned as `undefined`,\r\n    //   rather than the empty string.\r\n    // - `lastIndex` should not be incremented after zero-length matches.\r\n    RegExp.prototype.exec = function (str) {\r\n        var match = real.exec.apply(this, arguments),\r\n            name, r2;\r\n        if ( typeof(str) == 'string' && match) {\r\n            // Fix browsers whose `exec` methods don't consistently return `undefined` for\r\n            // nonparticipating capturing groups\r\n            if (!compliantExecNpcg && match.length > 1 && indexOf(match, \"\") > -1) {\r\n                r2 = RegExp(this.source, real.replace.call(getNativeFlags(this), \"g\", \"\"));\r\n                // Using `str.slice(match.index)` rather than `match[0]` in case lookahead allowed\r\n                // matching due to characters outside the match\r\n                real.replace.call(str.slice(match.index), r2, function () {\r\n                    for (var i = 1; i < arguments.length - 2; i++) {\r\n                        if (arguments[i] === undefined)\r\n                            match[i] = undefined;\r\n                    }\r\n                });\r\n            }\r\n            // Attach named capture properties\r\n            if (this._xregexp && this._xregexp.captureNames) {\r\n                for (var i = 1; i < match.length; i++) {\r\n                    name = this._xregexp.captureNames[i - 1];\r\n                    if (name)\r\n                       match[name] = match[i];\r\n                }\r\n            }\r\n            // Fix browsers that increment `lastIndex` after zero-length matches\r\n            if (!compliantLastIndexIncrement && this.global && !match[0].length && (this.lastIndex > match.index))\r\n                this.lastIndex--;\r\n        }\r\n        return match;\r\n    };\r\n\r\n    // Don't override `test` if it won't change anything\r\n    if (!compliantLastIndexIncrement) {\r\n        // Fix browser bug in native method\r\n        RegExp.prototype.test = function (str) {\r\n            // Use the native `exec` to skip some processing overhead, even though the overriden\r\n            // `exec` would take care of the `lastIndex` fix\r\n            var match = real.exec.call(this, str);\r\n            // Fix browsers that increment `lastIndex` after zero-length matches\r\n            if (match && this.global && !match[0].length && (this.lastIndex > match.index))\r\n                this.lastIndex--;\r\n            return !!match;\r\n        };\r\n    }\r\n\r\n    //---------------------------------\r\n    //  Private helper functions\r\n    //---------------------------------\r\n\r\n    function getNativeFlags (regex) {\r\n        return (regex.global     ? \"g\" : \"\") +\r\n               (regex.ignoreCase ? \"i\" : \"\") +\r\n               (regex.multiline  ? \"m\" : \"\") +\r\n               (regex.extended   ? \"x\" : \"\") + // Proposed for ES4; included in AS3\r\n               (regex.sticky     ? \"y\" : \"\");\r\n    }\r\n\r\n    function indexOf (array, item, from) {\r\n        if (Array.prototype.indexOf) // Use the native array method if available\r\n            return array.indexOf(item, from);\r\n        for (var i = from || 0; i < array.length; i++) {\r\n            if (array[i] === item)\r\n                return i;\r\n        }\r\n        return -1;\r\n    }\r\n\r\n});\r\n",null,"// https://github.com/kriskowal/es5-shim\r\n// Copyright 2009-2012 by contributors, MIT License\r\n\r\ndefine(function(require, exports, module) {\r\n\r\n/*\r\n * Brings an environment as close to ECMAScript 5 compliance\r\n * as is possible with the facilities of erstwhile engines.\r\n *\r\n * Annotated ES5: http://es5.github.com/ (specific links below)\r\n * ES5 Spec: http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf\r\n * Required reading: http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/\r\n */\r\n\r\n//\r\n// Function\r\n// ========\r\n//\r\n\r\n// ES-5 15.3.4.5\r\n// http://es5.github.com/#x15.3.4.5\r\n\r\nfunction Empty() {}\r\n\r\nif (!Function.prototype.bind) {\r\n    Function.prototype.bind = function bind(that) { // .length is 1\r\n        // 1. Let Target be the this value.\r\n        var target = this;\r\n        // 2. If IsCallable(Target) is false, throw a TypeError exception.\r\n        if (typeof target != \"function\") {\r\n            throw new TypeError(\"Function.prototype.bind called on incompatible \" + target);\r\n        }\r\n        // 3. Let A be a new (possibly empty) internal list of all of the\r\n        //   argument values provided after thisArg (arg1, arg2 etc), in order.\r\n        // XXX slicedArgs will stand in for \"A\" if used\r\n        var args = slice.call(arguments, 1); // for normal call\r\n        // 4. Let F be a new native ECMAScript object.\r\n        // 11. Set the [[Prototype]] internal property of F to the standard\r\n        //   built-in Function prototype object as specified in 15.3.3.1.\r\n        // 12. Set the [[Call]] internal property of F as described in\r\n        //   15.3.4.5.1.\r\n        // 13. Set the [[Construct]] internal property of F as described in\r\n        //   15.3.4.5.2.\r\n        // 14. Set the [[HasInstance]] internal property of F as described in\r\n        //   15.3.4.5.3.\r\n        var bound = function () {\r\n\r\n            if (this instanceof bound) {\r\n                // 15.3.4.5.2 [[Construct]]\r\n                // When the [[Construct]] internal method of a function object,\r\n                // F that was created using the bind function is called with a\r\n                // list of arguments ExtraArgs, the following steps are taken:\r\n                // 1. Let target be the value of F's [[TargetFunction]]\r\n                //   internal property.\r\n                // 2. If target has no [[Construct]] internal method, a\r\n                //   TypeError exception is thrown.\r\n                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal\r\n                //   property.\r\n                // 4. Let args be a new list containing the same values as the\r\n                //   list boundArgs in the same order followed by the same\r\n                //   values as the list ExtraArgs in the same order.\r\n                // 5. Return the result of calling the [[Construct]] internal\r\n                //   method of target providing args as the arguments.\r\n\r\n                var result = target.apply(\r\n                    this,\r\n                    args.concat(slice.call(arguments))\r\n                );\r\n                if (Object(result) === result) {\r\n                    return result;\r\n                }\r\n                return this;\r\n\r\n            } else {\r\n                // 15.3.4.5.1 [[Call]]\r\n                // When the [[Call]] internal method of a function object, F,\r\n                // which was created using the bind function is called with a\r\n                // this value and a list of arguments ExtraArgs, the following\r\n                // steps are taken:\r\n                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal\r\n                //   property.\r\n                // 2. Let boundThis be the value of F's [[BoundThis]] internal\r\n                //   property.\r\n                // 3. Let target be the value of F's [[TargetFunction]] internal\r\n                //   property.\r\n                // 4. Let args be a new list containing the same values as the\r\n                //   list boundArgs in the same order followed by the same\r\n                //   values as the list ExtraArgs in the same order.\r\n                // 5. Return the result of calling the [[Call]] internal method\r\n                //   of target providing boundThis as the this value and\r\n                //   providing args as the arguments.\r\n\r\n                // equiv: target.call(this, ...boundArgs, ...args)\r\n                return target.apply(\r\n                    that,\r\n                    args.concat(slice.call(arguments))\r\n                );\r\n\r\n            }\r\n\r\n        };\r\n        if(target.prototype) {\r\n            Empty.prototype = target.prototype;\r\n            bound.prototype = new Empty();\r\n            // Clean up dangling references.\r\n            Empty.prototype = null;\r\n        }\r\n        // XXX bound.length is never writable, so don't even try\r\n        //\r\n        // 15. If the [[Class]] internal property of Target is \"Function\", then\r\n        //     a. Let L be the length property of Target minus the length of A.\r\n        //     b. Set the length own property of F to either 0 or L, whichever is\r\n        //       larger.\r\n        // 16. Else set the length own property of F to 0.\r\n        // 17. Set the attributes of the length own property of F to the values\r\n        //   specified in 15.3.5.1.\r\n\r\n        // TODO\r\n        // 18. Set the [[Extensible]] internal property of F to true.\r\n\r\n        // TODO\r\n        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).\r\n        // 20. Call the [[DefineOwnProperty]] internal method of F with\r\n        //   arguments \"caller\", PropertyDescriptor {[[Get]]: thrower, [[Set]]:\r\n        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and\r\n        //   false.\r\n        // 21. Call the [[DefineOwnProperty]] internal method of F with\r\n        //   arguments \"arguments\", PropertyDescriptor {[[Get]]: thrower,\r\n        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},\r\n        //   and false.\r\n\r\n        // TODO\r\n        // NOTE Function objects created using Function.prototype.bind do not\r\n        // have a prototype property or the [[Code]], [[FormalParameters]], and\r\n        // [[Scope]] internal properties.\r\n        // XXX can't delete prototype in pure-js.\r\n\r\n        // 22. Return F.\r\n        return bound;\r\n    };\r\n}\r\n\r\n// Shortcut to an often accessed properties, in order to avoid multiple\r\n// dereference that costs universally.\r\n// _Please note: Shortcuts are defined after `Function.prototype.bind` as we\r\n// us it in defining shortcuts.\r\nvar call = Function.prototype.call;\r\nvar prototypeOfArray = Array.prototype;\r\nvar prototypeOfObject = Object.prototype;\r\nvar slice = prototypeOfArray.slice;\r\n// Having a toString local variable name breaks in Opera so use _toString.\r\nvar _toString = call.bind(prototypeOfObject.toString);\r\nvar owns = call.bind(prototypeOfObject.hasOwnProperty);\r\n\r\n// If JS engine supports accessors creating shortcuts.\r\nvar defineGetter;\r\nvar defineSetter;\r\nvar lookupGetter;\r\nvar lookupSetter;\r\nvar supportsAccessors;\r\nif ((supportsAccessors = owns(prototypeOfObject, \"__defineGetter__\"))) {\r\n    defineGetter = call.bind(prototypeOfObject.__defineGetter__);\r\n    defineSetter = call.bind(prototypeOfObject.__defineSetter__);\r\n    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);\r\n    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);\r\n}\r\n\r\n//\r\n// Array\r\n// =====\r\n//\r\n\r\n// ES5 15.4.4.12\r\n// http://es5.github.com/#x15.4.4.12\r\n// Default value for second param\r\n// [bugfix, ielt9, old browsers]\r\n// IE < 9 bug: [1,2].splice(0).join(\"\") == \"\" but should be \"12\"\r\nif ([1,2].splice(0).length != 2) {\r\n    if(function() { // test IE < 9 to splice bug - see issue #138\r\n        function makeArray(l) {\r\n            var a = new Array(l+2);\r\n            a[0] = a[1] = 0;\r\n            return a;\r\n        }\r\n        var array = [], lengthBefore;\r\n        \r\n        array.splice.apply(array, makeArray(20));\r\n        array.splice.apply(array, makeArray(26));\r\n\r\n        lengthBefore = array.length; //46\r\n        array.splice(5, 0, \"XXX\"); // add one element\r\n\r\n        lengthBefore + 1 == array.length\r\n\r\n        if (lengthBefore + 1 == array.length) {\r\n            return true;// has right splice implementation without bugs\r\n        }\r\n        // else {\r\n        // IE8 bug\r\n        // }\r\n    }()) {//IE 6/7\r\n        var array_splice = Array.prototype.splice;\r\n        Array.prototype.splice = function(start, deleteCount) {\r\n            if (!arguments.length) {\r\n                return [];\r\n            } else {\r\n                return array_splice.apply(this, [\r\n                    start === void 0 ? 0 : start,\r\n                    deleteCount === void 0 ? (this.length - start) : deleteCount\r\n                ].concat(slice.call(arguments, 2)))\r\n            }\r\n        };\r\n    } else {//IE8\r\n        // taken from http://docs.sencha.com/ext-js/4-1/source/Array2.html\r\n        Array.prototype.splice = function(pos, removeCount){\r\n            var length = this.length;\r\n            if (pos > 0) {\r\n                if (pos > length)\r\n                    pos = length;\r\n            } else if (pos == void 0) {\r\n                pos = 0;\r\n            } else if (pos < 0) {\r\n                pos = Math.max(length + pos, 0);\r\n            }\r\n\r\n            if (!(pos+removeCount < length))\r\n                removeCount = length - pos;\r\n\r\n            var removed = this.slice(pos, pos+removeCount);\r\n            var insert = slice.call(arguments, 2);\r\n            var add = insert.length;            \r\n\r\n            // we try to use Array.push when we can for efficiency...\r\n            if (pos === length) {\r\n                if (add) {\r\n                    this.push.apply(this, insert);\r\n                }\r\n            } else {\r\n                var remove = Math.min(removeCount, length - pos);\r\n                var tailOldPos = pos + remove;\r\n                var tailNewPos = tailOldPos + add - remove;\r\n                var tailCount = length - tailOldPos;\r\n                var lengthAfterRemove = length - remove;\r\n\r\n                if (tailNewPos < tailOldPos) { // case A\r\n                    for (var i = 0; i < tailCount; ++i) {\r\n                        this[tailNewPos+i] = this[tailOldPos+i];\r\n                    }\r\n                } else if (tailNewPos > tailOldPos) { // case B\r\n                    for (i = tailCount; i--; ) {\r\n                        this[tailNewPos+i] = this[tailOldPos+i];\r\n                    }\r\n                } // else, add == remove (nothing to do)\r\n\r\n                if (add && pos === lengthAfterRemove) {\r\n                    this.length = lengthAfterRemove; // truncate array\r\n                    this.push.apply(this, insert);\r\n                } else {\r\n                    this.length = lengthAfterRemove + add; // reserves space\r\n                    for (i = 0; i < add; ++i) {\r\n                        this[pos+i] = insert[i];\r\n                    }\r\n                }\r\n            }\r\n            return removed;\r\n        };\r\n    }\r\n}\r\n\r\n// ES5 15.4.3.2\r\n// http://es5.github.com/#x15.4.3.2\r\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\r\nif (!Array.isArray) {\r\n    Array.isArray = function isArray(obj) {\r\n        return _toString(obj) == \"[object Array]\";\r\n    };\r\n}\r\n\r\n// The IsCallable() check in the Array functions\r\n// has been replaced with a strict check on the\r\n// internal class of the object to trap cases where\r\n// the provided function was actually a regular\r\n// expression literal, which in V8 and\r\n// JavaScriptCore is a typeof \"function\".  Only in\r\n// V8 are regular expression literals permitted as\r\n// reduce parameters, so it is desirable in the\r\n// general case for the shim to match the more\r\n// strict and common behavior of rejecting regular\r\n// expressions.\r\n\r\n// ES5 15.4.4.18\r\n// http://es5.github.com/#x15.4.4.18\r\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/forEach\r\n\r\n// Check failure of by-index access of string characters (IE < 9)\r\n// and failure of `0 in boxedString` (Rhino)\r\nvar boxedString = Object(\"a\"),\r\n    splitString = boxedString[0] != \"a\" || !(0 in boxedString);\r\n\r\nif (!Array.prototype.forEach) {\r\n    Array.prototype.forEach = function forEach(fun /*, thisp*/) {\r\n        var object = toObject(this),\r\n            self = splitString && _toString(this) == \"[object String]\" ?\r\n                this.split(\"\") :\r\n                object,\r\n            thisp = arguments[1],\r\n            i = -1,\r\n            length = self.length >>> 0;\r\n\r\n        // If no callback function or if callback is not a callable function\r\n        if (_toString(fun) != \"[object Function]\") {\r\n            throw new TypeError(); // TODO message\r\n        }\r\n\r\n        while (++i < length) {\r\n            if (i in self) {\r\n                // Invoke the callback function with call, passing arguments:\r\n                // context, property value, property key, thisArg object\r\n                // context\r\n                fun.call(thisp, self[i], i, object);\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\n// ES5 15.4.4.19\r\n// http://es5.github.com/#x15.4.4.19\r\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map\r\nif (!Array.prototype.map) {\r\n    Array.prototype.map = function map(fun /*, thisp*/) {\r\n        var object = toObject(this),\r\n            self = splitString && _toString(this) == \"[object String]\" ?\r\n                this.split(\"\") :\r\n                object,\r\n            length = self.length >>> 0,\r\n            result = Array(length),\r\n            thisp = arguments[1];\r\n\r\n        // If no callback function or if callback is not a callable function\r\n        if (_toString(fun) != \"[object Function]\") {\r\n            throw new TypeError(fun + \" is not a function\");\r\n        }\r\n\r\n        for (var i = 0; i < length; i++) {\r\n            if (i in self)\r\n                result[i] = fun.call(thisp, self[i], i, object);\r\n        }\r\n        return result;\r\n    };\r\n}\r\n\r\n// ES5 15.4.4.20\r\n// http://es5.github.com/#x15.4.4.20\r\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/filter\r\nif (!Array.prototype.filter) {\r\n    Array.prototype.filter = function filter(fun /*, thisp */) {\r\n        var object = toObject(this),\r\n            self = splitString && _toString(this) == \"[object String]\" ?\r\n                this.split(\"\") :\r\n                    object,\r\n            length = self.length >>> 0,\r\n            result = [],\r\n            value,\r\n            thisp = arguments[1];\r\n\r\n        // If no callback function or if callback is not a callable function\r\n        if (_toString(fun) != \"[object Function]\") {\r\n            throw new TypeError(fun + \" is not a function\");\r\n        }\r\n\r\n        for (var i = 0; i < length; i++) {\r\n            if (i in self) {\r\n                value = self[i];\r\n                if (fun.call(thisp, value, i, object)) {\r\n                    result.push(value);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n}\r\n\r\n// ES5 15.4.4.16\r\n// http://es5.github.com/#x15.4.4.16\r\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every\r\nif (!Array.prototype.every) {\r\n    Array.prototype.every = function every(fun /*, thisp */) {\r\n        var object = toObject(this),\r\n            self = splitString && _toString(this) == \"[object String]\" ?\r\n                this.split(\"\") :\r\n                object,\r\n            length = self.length >>> 0,\r\n            thisp = arguments[1];\r\n\r\n        // If no callback function or if callback is not a callable function\r\n        if (_toString(fun) != \"[object Function]\") {\r\n            throw new TypeError(fun + \" is not a function\");\r\n        }\r\n\r\n        for (var i = 0; i < length; i++) {\r\n            if (i in self && !fun.call(thisp, self[i], i, object)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n}\r\n\r\n// ES5 15.4.4.17\r\n// http://es5.github.com/#x15.4.4.17\r\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some\r\nif (!Array.prototype.some) {\r\n    Array.prototype.some = function some(fun /*, thisp */) {\r\n        var object = toObject(this),\r\n            self = splitString && _toString(this) == \"[object String]\" ?\r\n                this.split(\"\") :\r\n                object,\r\n            length = self.length >>> 0,\r\n            thisp = arguments[1];\r\n\r\n        // If no callback function or if callback is not a callable function\r\n        if (_toString(fun) != \"[object Function]\") {\r\n            throw new TypeError(fun + \" is not a function\");\r\n        }\r\n\r\n        for (var i = 0; i < length; i++) {\r\n            if (i in self && fun.call(thisp, self[i], i, object)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n}\r\n\r\n// ES5 15.4.4.21\r\n// http://es5.github.com/#x15.4.4.21\r\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduce\r\nif (!Array.prototype.reduce) {\r\n    Array.prototype.reduce = function reduce(fun /*, initial*/) {\r\n        var object = toObject(this),\r\n            self = splitString && _toString(this) == \"[object String]\" ?\r\n                this.split(\"\") :\r\n                object,\r\n            length = self.length >>> 0;\r\n\r\n        // If no callback function or if callback is not a callable function\r\n        if (_toString(fun) != \"[object Function]\") {\r\n            throw new TypeError(fun + \" is not a function\");\r\n        }\r\n\r\n        // no value to return if no initial value and an empty array\r\n        if (!length && arguments.length == 1) {\r\n            throw new TypeError(\"reduce of empty array with no initial value\");\r\n        }\r\n\r\n        var i = 0;\r\n        var result;\r\n        if (arguments.length >= 2) {\r\n            result = arguments[1];\r\n        } else {\r\n            do {\r\n                if (i in self) {\r\n                    result = self[i++];\r\n                    break;\r\n                }\r\n\r\n                // if array contains no values, no initial value to return\r\n                if (++i >= length) {\r\n                    throw new TypeError(\"reduce of empty array with no initial value\");\r\n                }\r\n            } while (true);\r\n        }\r\n\r\n        for (; i < length; i++) {\r\n            if (i in self) {\r\n                result = fun.call(void 0, result, self[i], i, object);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    };\r\n}\r\n\r\n// ES5 15.4.4.22\r\n// http://es5.github.com/#x15.4.4.22\r\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduceRight\r\nif (!Array.prototype.reduceRight) {\r\n    Array.prototype.reduceRight = function reduceRight(fun /*, initial*/) {\r\n        var object = toObject(this),\r\n            self = splitString && _toString(this) == \"[object String]\" ?\r\n                this.split(\"\") :\r\n                object,\r\n            length = self.length >>> 0;\r\n\r\n        // If no callback function or if callback is not a callable function\r\n        if (_toString(fun) != \"[object Function]\") {\r\n            throw new TypeError(fun + \" is not a function\");\r\n        }\r\n\r\n        // no value to return if no initial value, empty array\r\n        if (!length && arguments.length == 1) {\r\n            throw new TypeError(\"reduceRight of empty array with no initial value\");\r\n        }\r\n\r\n        var result, i = length - 1;\r\n        if (arguments.length >= 2) {\r\n            result = arguments[1];\r\n        } else {\r\n            do {\r\n                if (i in self) {\r\n                    result = self[i--];\r\n                    break;\r\n                }\r\n\r\n                // if array contains no values, no initial value to return\r\n                if (--i < 0) {\r\n                    throw new TypeError(\"reduceRight of empty array with no initial value\");\r\n                }\r\n            } while (true);\r\n        }\r\n\r\n        do {\r\n            if (i in this) {\r\n                result = fun.call(void 0, result, self[i], i, object);\r\n            }\r\n        } while (i--);\r\n\r\n        return result;\r\n    };\r\n}\r\n\r\n// ES5 15.4.4.14\r\n// http://es5.github.com/#x15.4.4.14\r\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf\r\nif (!Array.prototype.indexOf || ([0, 1].indexOf(1, 2) != -1)) {\r\n    Array.prototype.indexOf = function indexOf(sought /*, fromIndex */ ) {\r\n        var self = splitString && _toString(this) == \"[object String]\" ?\r\n                this.split(\"\") :\r\n                toObject(this),\r\n            length = self.length >>> 0;\r\n\r\n        if (!length) {\r\n            return -1;\r\n        }\r\n\r\n        var i = 0;\r\n        if (arguments.length > 1) {\r\n            i = toInteger(arguments[1]);\r\n        }\r\n\r\n        // handle negative indices\r\n        i = i >= 0 ? i : Math.max(0, length + i);\r\n        for (; i < length; i++) {\r\n            if (i in self && self[i] === sought) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n}\r\n\r\n// ES5 15.4.4.15\r\n// http://es5.github.com/#x15.4.4.15\r\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf\r\nif (!Array.prototype.lastIndexOf || ([0, 1].lastIndexOf(0, -3) != -1)) {\r\n    Array.prototype.lastIndexOf = function lastIndexOf(sought /*, fromIndex */) {\r\n        var self = splitString && _toString(this) == \"[object String]\" ?\r\n                this.split(\"\") :\r\n                toObject(this),\r\n            length = self.length >>> 0;\r\n\r\n        if (!length) {\r\n            return -1;\r\n        }\r\n        var i = length - 1;\r\n        if (arguments.length > 1) {\r\n            i = Math.min(i, toInteger(arguments[1]));\r\n        }\r\n        // handle negative indices\r\n        i = i >= 0 ? i : length - Math.abs(i);\r\n        for (; i >= 0; i--) {\r\n            if (i in self && sought === self[i]) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n}\r\n\r\n//\r\n// Object\r\n// ======\r\n//\r\n\r\n// ES5 15.2.3.2\r\n// http://es5.github.com/#x15.2.3.2\r\nif (!Object.getPrototypeOf) {\r\n    // https://github.com/kriskowal/es5-shim/issues#issue/2\r\n    // http://ejohn.org/blog/objectgetprototypeof/\r\n    // recommended by fschaefer on github\r\n    Object.getPrototypeOf = function getPrototypeOf(object) {\r\n        return object.__proto__ || (\r\n            object.constructor ?\r\n            object.constructor.prototype :\r\n            prototypeOfObject\r\n        );\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.3\r\n// http://es5.github.com/#x15.2.3.3\r\nif (!Object.getOwnPropertyDescriptor) {\r\n    var ERR_NON_OBJECT = \"Object.getOwnPropertyDescriptor called on a \" +\r\n                         \"non-object: \";\r\n    Object.getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\r\n        if ((typeof object != \"object\" && typeof object != \"function\") || object === null)\r\n            throw new TypeError(ERR_NON_OBJECT + object);\r\n        // If object does not owns property return undefined immediately.\r\n        if (!owns(object, property))\r\n            return;\r\n\r\n        var descriptor, getter, setter;\r\n\r\n        // If object has a property then it's for sure both `enumerable` and\r\n        // `configurable`.\r\n        descriptor =  { enumerable: true, configurable: true };\r\n\r\n        // If JS engine supports accessor properties then property may be a\r\n        // getter or setter.\r\n        if (supportsAccessors) {\r\n            // Unfortunately `__lookupGetter__` will return a getter even\r\n            // if object has own non getter property along with a same named\r\n            // inherited getter. To avoid misbehavior we temporary remove\r\n            // `__proto__` so that `__lookupGetter__` will return getter only\r\n            // if it's owned by an object.\r\n            var prototype = object.__proto__;\r\n            object.__proto__ = prototypeOfObject;\r\n\r\n            var getter = lookupGetter(object, property);\r\n            var setter = lookupSetter(object, property);\r\n\r\n            // Once we have getter and setter we can put values back.\r\n            object.__proto__ = prototype;\r\n\r\n            if (getter || setter) {\r\n                if (getter) descriptor.get = getter;\r\n                if (setter) descriptor.set = setter;\r\n\r\n                // If it was accessor property we're done and return here\r\n                // in order to avoid adding `value` to the descriptor.\r\n                return descriptor;\r\n            }\r\n        }\r\n\r\n        // If we got this far we know that object has an own property that is\r\n        // not an accessor so we set it as a value and return descriptor.\r\n        descriptor.value = object[property];\r\n        return descriptor;\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.4\r\n// http://es5.github.com/#x15.2.3.4\r\nif (!Object.getOwnPropertyNames) {\r\n    Object.getOwnPropertyNames = function getOwnPropertyNames(object) {\r\n        return Object.keys(object);\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.5\r\n// http://es5.github.com/#x15.2.3.5\r\nif (!Object.create) {\r\n    var createEmpty;\r\n    if (Object.prototype.__proto__ === null) {\r\n        createEmpty = function () {\r\n            return { \"__proto__\": null };\r\n        };\r\n    } else {\r\n        // In old IE __proto__ can't be used to manually set `null`\r\n        createEmpty = function () {\r\n            var empty = {};\r\n            for (var i in empty)\r\n                empty[i] = null;\r\n            empty.constructor =\r\n            empty.hasOwnProperty =\r\n            empty.propertyIsEnumerable =\r\n            empty.isPrototypeOf =\r\n            empty.toLocaleString =\r\n            empty.toString =\r\n            empty.valueOf =\r\n            empty.__proto__ = null;\r\n            return empty;\r\n        }\r\n    }\r\n\r\n    Object.create = function create(prototype, properties) {\r\n        var object;\r\n        if (prototype === null) {\r\n            object = createEmpty();\r\n        } else {\r\n            if (typeof prototype != \"object\")\r\n                throw new TypeError(\"typeof prototype[\"+(typeof prototype)+\"] != 'object'\");\r\n            var Type = function () {};\r\n            Type.prototype = prototype;\r\n            object = new Type();\r\n            // IE has no built-in implementation of `Object.getPrototypeOf`\r\n            // neither `__proto__`, but this manually setting `__proto__` will\r\n            // guarantee that `Object.getPrototypeOf` will work as expected with\r\n            // objects created using `Object.create`\r\n            object.__proto__ = prototype;\r\n        }\r\n        if (properties !== void 0)\r\n            Object.defineProperties(object, properties);\r\n        return object;\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.6\r\n// http://es5.github.com/#x15.2.3.6\r\n\r\n// Patch for WebKit and IE8 standard mode\r\n// Designed by hax <hax.github.com>\r\n// related issue: https://github.com/kriskowal/es5-shim/issues#issue/5\r\n// IE8 Reference:\r\n//     http://msdn.microsoft.com/en-us/library/dd282900.aspx\r\n//     http://msdn.microsoft.com/en-us/library/dd229916.aspx\r\n// WebKit Bugs:\r\n//     https://bugs.webkit.org/show_bug.cgi?id=36423\r\n\r\nfunction doesDefinePropertyWork(object) {\r\n    try {\r\n        Object.defineProperty(object, \"sentinel\", {});\r\n        return \"sentinel\" in object;\r\n    } catch (exception) {\r\n        // returns falsy\r\n    }\r\n}\r\n\r\n// check whether defineProperty works if it's given. Otherwise,\r\n// shim partially.\r\nif (Object.defineProperty) {\r\n    var definePropertyWorksOnObject = doesDefinePropertyWork({});\r\n    var definePropertyWorksOnDom = typeof document == \"undefined\" ||\r\n        doesDefinePropertyWork(document.createElement(\"div\"));\r\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) {\r\n        var definePropertyFallback = Object.defineProperty;\r\n    }\r\n}\r\n\r\nif (!Object.defineProperty || definePropertyFallback) {\r\n    var ERR_NON_OBJECT_DESCRIPTOR = \"Property description must be an object: \";\r\n    var ERR_NON_OBJECT_TARGET = \"Object.defineProperty called on non-object: \"\r\n    var ERR_ACCESSORS_NOT_SUPPORTED = \"getters & setters can not be defined \" +\r\n                                      \"on this javascript engine\";\r\n\r\n    Object.defineProperty = function defineProperty(object, property, descriptor) {\r\n        if ((typeof object != \"object\" && typeof object != \"function\") || object === null)\r\n            throw new TypeError(ERR_NON_OBJECT_TARGET + object);\r\n        if ((typeof descriptor != \"object\" && typeof descriptor != \"function\") || descriptor === null)\r\n            throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);\r\n\r\n        // make a valiant attempt to use the real defineProperty\r\n        // for I8's DOM elements.\r\n        if (definePropertyFallback) {\r\n            try {\r\n                return definePropertyFallback.call(Object, object, property, descriptor);\r\n            } catch (exception) {\r\n                // try the shim if the real one doesn't work\r\n            }\r\n        }\r\n\r\n        // If it's a data property.\r\n        if (owns(descriptor, \"value\")) {\r\n            // fail silently if \"writable\", \"enumerable\", or \"configurable\"\r\n            // are requested but not supported\r\n            /*\r\n            // alternate approach:\r\n            if ( // can't implement these features; allow false but not true\r\n                !(owns(descriptor, \"writable\") ? descriptor.writable : true) ||\r\n                !(owns(descriptor, \"enumerable\") ? descriptor.enumerable : true) ||\r\n                !(owns(descriptor, \"configurable\") ? descriptor.configurable : true)\r\n            )\r\n                throw new RangeError(\r\n                    \"This implementation of Object.defineProperty does not \" +\r\n                    \"support configurable, enumerable, or writable.\"\r\n                );\r\n            */\r\n\r\n            if (supportsAccessors && (lookupGetter(object, property) ||\r\n                                      lookupSetter(object, property)))\r\n            {\r\n                // As accessors are supported only on engines implementing\r\n                // `__proto__` we can safely override `__proto__` while defining\r\n                // a property to make sure that we don't hit an inherited\r\n                // accessor.\r\n                var prototype = object.__proto__;\r\n                object.__proto__ = prototypeOfObject;\r\n                // Deleting a property anyway since getter / setter may be\r\n                // defined on object itself.\r\n                delete object[property];\r\n                object[property] = descriptor.value;\r\n                // Setting original `__proto__` back now.\r\n                object.__proto__ = prototype;\r\n            } else {\r\n                object[property] = descriptor.value;\r\n            }\r\n        } else {\r\n            if (!supportsAccessors)\r\n                throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);\r\n            // If we got that far then getters and setters can be defined !!\r\n            if (owns(descriptor, \"get\"))\r\n                defineGetter(object, property, descriptor.get);\r\n            if (owns(descriptor, \"set\"))\r\n                defineSetter(object, property, descriptor.set);\r\n        }\r\n\r\n        return object;\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.7\r\n// http://es5.github.com/#x15.2.3.7\r\nif (!Object.defineProperties) {\r\n    Object.defineProperties = function defineProperties(object, properties) {\r\n        for (var property in properties) {\r\n            if (owns(properties, property))\r\n                Object.defineProperty(object, property, properties[property]);\r\n        }\r\n        return object;\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.8\r\n// http://es5.github.com/#x15.2.3.8\r\nif (!Object.seal) {\r\n    Object.seal = function seal(object) {\r\n        // this is misleading and breaks feature-detection, but\r\n        // allows \"securable\" code to \"gracefully\" degrade to working\r\n        // but insecure code.\r\n        return object;\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.9\r\n// http://es5.github.com/#x15.2.3.9\r\nif (!Object.freeze) {\r\n    Object.freeze = function freeze(object) {\r\n        // this is misleading and breaks feature-detection, but\r\n        // allows \"securable\" code to \"gracefully\" degrade to working\r\n        // but insecure code.\r\n        return object;\r\n    };\r\n}\r\n\r\n// detect a Rhino bug and patch it\r\ntry {\r\n    Object.freeze(function () {});\r\n} catch (exception) {\r\n    Object.freeze = (function freeze(freezeObject) {\r\n        return function freeze(object) {\r\n            if (typeof object == \"function\") {\r\n                return object;\r\n            } else {\r\n                return freezeObject(object);\r\n            }\r\n        };\r\n    })(Object.freeze);\r\n}\r\n\r\n// ES5 15.2.3.10\r\n// http://es5.github.com/#x15.2.3.10\r\nif (!Object.preventExtensions) {\r\n    Object.preventExtensions = function preventExtensions(object) {\r\n        // this is misleading and breaks feature-detection, but\r\n        // allows \"securable\" code to \"gracefully\" degrade to working\r\n        // but insecure code.\r\n        return object;\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.11\r\n// http://es5.github.com/#x15.2.3.11\r\nif (!Object.isSealed) {\r\n    Object.isSealed = function isSealed(object) {\r\n        return false;\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.12\r\n// http://es5.github.com/#x15.2.3.12\r\nif (!Object.isFrozen) {\r\n    Object.isFrozen = function isFrozen(object) {\r\n        return false;\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.13\r\n// http://es5.github.com/#x15.2.3.13\r\nif (!Object.isExtensible) {\r\n    Object.isExtensible = function isExtensible(object) {\r\n        // 1. If Type(O) is not Object throw a TypeError exception.\r\n        if (Object(object) === object) {\r\n            throw new TypeError(); // TODO message\r\n        }\r\n        // 2. Return the Boolean value of the [[Extensible]] internal property of O.\r\n        var name = '';\r\n        while (owns(object, name)) {\r\n            name += '?';\r\n        }\r\n        object[name] = true;\r\n        var returnValue = owns(object, name);\r\n        delete object[name];\r\n        return returnValue;\r\n    };\r\n}\r\n\r\n// ES5 15.2.3.14\r\n// http://es5.github.com/#x15.2.3.14\r\nif (!Object.keys) {\r\n    // http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation\r\n    var hasDontEnumBug = true,\r\n        dontEnums = [\r\n            \"toString\",\r\n            \"toLocaleString\",\r\n            \"valueOf\",\r\n            \"hasOwnProperty\",\r\n            \"isPrototypeOf\",\r\n            \"propertyIsEnumerable\",\r\n            \"constructor\"\r\n        ],\r\n        dontEnumsLength = dontEnums.length;\r\n\r\n    for (var key in {\"toString\": null}) {\r\n        hasDontEnumBug = false;\r\n    }\r\n\r\n    Object.keys = function keys(object) {\r\n\r\n        if (\r\n            (typeof object != \"object\" && typeof object != \"function\") ||\r\n            object === null\r\n        ) {\r\n            throw new TypeError(\"Object.keys called on a non-object\");\r\n        }\r\n\r\n        var keys = [];\r\n        for (var name in object) {\r\n            if (owns(object, name)) {\r\n                keys.push(name);\r\n            }\r\n        }\r\n\r\n        if (hasDontEnumBug) {\r\n            for (var i = 0, ii = dontEnumsLength; i < ii; i++) {\r\n                var dontEnum = dontEnums[i];\r\n                if (owns(object, dontEnum)) {\r\n                    keys.push(dontEnum);\r\n                }\r\n            }\r\n        }\r\n        return keys;\r\n    };\r\n\r\n}\r\n\r\n//\r\n// most of es5-shim Date section is removed since ace doesn't need it, it is too intrusive and it causes problems for users\r\n// ====\r\n//\r\n\r\n// ES5 15.9.4.4\r\n// http://es5.github.com/#x15.9.4.4\r\nif (!Date.now) {\r\n    Date.now = function now() {\r\n        return new Date().getTime();\r\n    };\r\n}\r\n\r\n\r\n//\r\n// String\r\n// ======\r\n//\r\n\r\n// ES5 15.5.4.20\r\n// http://es5.github.com/#x15.5.4.20\r\nvar ws = \"\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\" +\r\n    \"\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\" +\r\n    \"\\u2029\\uFEFF\";\r\nif (!String.prototype.trim || ws.trim()) {\r\n    // http://blog.stevenlevithan.com/archives/faster-trim-javascript\r\n    // http://perfectionkills.com/whitespace-deviations/\r\n    ws = \"[\" + ws + \"]\";\r\n    var trimBeginRegexp = new RegExp(\"^\" + ws + ws + \"*\"),\r\n        trimEndRegexp = new RegExp(ws + ws + \"*$\");\r\n    String.prototype.trim = function trim() {\r\n        return String(this).replace(trimBeginRegexp, \"\").replace(trimEndRegexp, \"\");\r\n    };\r\n}\r\n\r\n//\r\n// Util\r\n// ======\r\n//\r\n\r\n// ES5 9.4\r\n// http://es5.github.com/#x9.4\r\n// http://jsperf.com/to-integer\r\n\r\nfunction toInteger(n) {\r\n    n = +n;\r\n    if (n !== n) { // isNaN\r\n        n = 0;\r\n    } else if (n !== 0 && n !== (1/0) && n !== -(1/0)) {\r\n        n = (n > 0 || -1) * Math.floor(Math.abs(n));\r\n    }\r\n    return n;\r\n}\r\n\r\nfunction isPrimitive(input) {\r\n    var type = typeof input;\r\n    return (\r\n        input === null ||\r\n        type === \"undefined\" ||\r\n        type === \"boolean\" ||\r\n        type === \"number\" ||\r\n        type === \"string\"\r\n    );\r\n}\r\n\r\nfunction toPrimitive(input) {\r\n    var val, valueOf, toString;\r\n    if (isPrimitive(input)) {\r\n        return input;\r\n    }\r\n    valueOf = input.valueOf;\r\n    if (typeof valueOf === \"function\") {\r\n        val = valueOf.call(input);\r\n        if (isPrimitive(val)) {\r\n            return val;\r\n        }\r\n    }\r\n    toString = input.toString;\r\n    if (typeof toString === \"function\") {\r\n        val = toString.call(input);\r\n        if (isPrimitive(val)) {\r\n            return val;\r\n        }\r\n    }\r\n    throw new TypeError();\r\n}\r\n\r\n// ES5 9.9\r\n// http://es5.github.com/#x9.9\r\nvar toObject = function (o) {\r\n    if (o == null) { // this matches both null and undefined\r\n        throw new TypeError(\"can't convert \"+o+\" to object\");\r\n    }\r\n    return Object(o);\r\n};\r\n\r\n});\r\n","/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nexports.inherits = function(ctor, superCtor) {\r\n    ctor.super_ = superCtor;\r\n    ctor.prototype = Object.create(superCtor.prototype, {\r\n        constructor: {\r\n            value: ctor,\r\n            enumerable: false,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n};\r\n\r\nexports.mixin = function(obj, mixin) {\r\n    for (var key in mixin) {\r\n        obj[key] = mixin[key];\r\n    }\r\n    return obj;\r\n};\r\n\r\nexports.implement = function(proto, mixin) {\r\n    exports.mixin(proto, mixin);\r\n};\r\n\r\n});\r\n","/*! @license\r\n==========================================================================\r\nSproutCore -- JavaScript Application Framework\r\ncopyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a\r\ncopy of this software and associated documentation files (the \"Software\"),\r\nto deal in the Software without restriction, including without limitation\r\nthe rights to use, copy, modify, merge, publish, distribute, sublicense,\r\nand/or sell copies of the Software, and to permit persons to whom the\r\nSoftware is furnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\r\nDEALINGS IN THE SOFTWARE.\r\n\r\nSproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.\r\n\r\nFor more information about SproutCore, visit http://www.sproutcore.com\r\n\r\n\r\n==========================================================================\r\n@license */\r\n\r\n// Most of the following code is taken from SproutCore with a few changes.\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nrequire(\"./fixoldbrowsers\");\r\n\r\nvar oop = require(\"./oop\");\r\n\r\n/*\r\n * Helper functions and hashes for key handling.\r\n */\r\nvar Keys = (function() {\r\n    var ret = {\r\n        MODIFIER_KEYS: {\r\n            16: 'Shift', 17: 'Ctrl', 18: 'Alt', 224: 'Meta'\r\n        },\r\n\r\n        KEY_MODS: {\r\n            \"ctrl\": 1, \"alt\": 2, \"option\" : 2, \"shift\": 4,\r\n            \"super\": 8, \"meta\": 8, \"command\": 8, \"cmd\": 8\r\n        },\r\n\r\n        FUNCTION_KEYS : {\r\n            8  : \"Backspace\",\r\n            9  : \"Tab\",\r\n            13 : \"Return\",\r\n            19 : \"Pause\",\r\n            27 : \"Esc\",\r\n            32 : \"Space\",\r\n            33 : \"PageUp\",\r\n            34 : \"PageDown\",\r\n            35 : \"End\",\r\n            36 : \"Home\",\r\n            37 : \"Left\",\r\n            38 : \"Up\",\r\n            39 : \"Right\",\r\n            40 : \"Down\",\r\n            44 : \"Print\",\r\n            45 : \"Insert\",\r\n            46 : \"Delete\",\r\n            96 : \"Numpad0\",\r\n            97 : \"Numpad1\",\r\n            98 : \"Numpad2\",\r\n            99 : \"Numpad3\",\r\n            100: \"Numpad4\",\r\n            101: \"Numpad5\",\r\n            102: \"Numpad6\",\r\n            103: \"Numpad7\",\r\n            104: \"Numpad8\",\r\n            105: \"Numpad9\",\r\n            '-13': \"NumpadEnter\",\r\n            112: \"F1\",\r\n            113: \"F2\",\r\n            114: \"F3\",\r\n            115: \"F4\",\r\n            116: \"F5\",\r\n            117: \"F6\",\r\n            118: \"F7\",\r\n            119: \"F8\",\r\n            120: \"F9\",\r\n            121: \"F10\",\r\n            122: \"F11\",\r\n            123: \"F12\",\r\n            144: \"Numlock\",\r\n            145: \"Scrolllock\"\r\n        },\r\n\r\n        PRINTABLE_KEYS: {\r\n           32: ' ',  48: '0',  49: '1',  50: '2',  51: '3',  52: '4', 53:  '5',\r\n           54: '6',  55: '7',  56: '8',  57: '9',  59: ';',  61: '=', 65:  'a',\r\n           66: 'b',  67: 'c',  68: 'd',  69: 'e',  70: 'f',  71: 'g', 72:  'h',\r\n           73: 'i',  74: 'j',  75: 'k',  76: 'l',  77: 'm',  78: 'n', 79:  'o',\r\n           80: 'p',  81: 'q',  82: 'r',  83: 's',  84: 't',  85: 'u', 86:  'v',\r\n           87: 'w',  88: 'x',  89: 'y',  90: 'z', 107: '+', 109: '-', 110: '.',\r\n          186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`',\r\n          219: '[', 220: '\\\\',221: ']', 222: '\\''\r\n        }\r\n    };\r\n\r\n    // A reverse map of FUNCTION_KEYS\r\n    var name, i;\r\n    for (i in ret.FUNCTION_KEYS) {\r\n        name = ret.FUNCTION_KEYS[i].toLowerCase();\r\n        ret[name] = parseInt(i, 10);\r\n    }\r\n\r\n    // A reverse map of PRINTABLE_KEYS\r\n    for (i in ret.PRINTABLE_KEYS) {\r\n        name = ret.PRINTABLE_KEYS[i].toLowerCase();\r\n        ret[name] = parseInt(i, 10);\r\n    }\r\n\r\n    // Add the MODIFIER_KEYS, FUNCTION_KEYS and PRINTABLE_KEYS to the KEY\r\n    // variables as well.\r\n    oop.mixin(ret, ret.MODIFIER_KEYS);\r\n    oop.mixin(ret, ret.PRINTABLE_KEYS);\r\n    oop.mixin(ret, ret.FUNCTION_KEYS);\r\n\r\n    // aliases\r\n    ret.enter = ret[\"return\"];\r\n    ret.escape = ret.esc;\r\n    ret.del = ret[\"delete\"];\r\n\r\n    // workaround for firefox bug\r\n    ret[173] = '-';\r\n    \r\n    (function() {\r\n        var mods = [\"cmd\", \"ctrl\", \"alt\", \"shift\"];\r\n        for (var i = Math.pow(2, mods.length); i--;) {            \r\n            ret.KEY_MODS[i] = mods.filter(function(x) {\r\n                return i & ret.KEY_MODS[x];\r\n            }).join(\"-\") + \"-\";\r\n        }\r\n    })();\r\n\r\n    ret.KEY_MODS[0] = \"\";\r\n    ret.KEY_MODS[-1] = \"input-\";\r\n\r\n    return ret;\r\n})();\r\noop.mixin(exports, Keys);\r\n\r\nexports.keyCodeToString = function(keyCode) {\r\n    // Language-switching keystroke in Chrome/Linux emits keyCode 0.\r\n    var keyString = Keys[keyCode];\r\n    if (typeof keyString != \"string\")\r\n        keyString = String.fromCharCode(keyCode);\r\n    return keyString.toLowerCase();\r\n};\r\n\r\n});\r\n","/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar keyUtil = require(\"../lib/keys\");\r\nvar useragent = require(\"../lib/useragent\");\r\nvar KEY_MODS = keyUtil.KEY_MODS;\r\n\r\nfunction HashHandler(config, platform) {\r\n    this.platform = platform || (useragent.isMac ? \"mac\" : \"win\");\r\n    this.commands = {};\r\n    this.commandKeyBinding = {};\r\n    this.addCommands(config);\r\n    this.$singleCommand = true;\r\n}\r\n\r\nfunction MultiHashHandler(config, platform) {\r\n    HashHandler.call(this, config, platform);\r\n    this.$singleCommand = false;\r\n}\r\n\r\nMultiHashHandler.prototype = HashHandler.prototype;\r\n\r\n(function() {\r\n    \r\n\r\n    this.addCommand = function(command) {\r\n        if (this.commands[command.name])\r\n            this.removeCommand(command);\r\n\r\n        this.commands[command.name] = command;\r\n\r\n        if (command.bindKey)\r\n            this._buildKeyHash(command);\r\n    };\r\n\r\n    this.removeCommand = function(command, keepCommand) {\r\n        var name = command && (typeof command === 'string' ? command : command.name);\r\n        command = this.commands[name];\r\n        if (!keepCommand)\r\n            delete this.commands[name];\r\n\r\n        // exhaustive search is brute force but since removeCommand is\r\n        // not a performance critical operation this should be OK\r\n        var ckb = this.commandKeyBinding;\r\n        for (var keyId in ckb) {\r\n            var cmdGroup = ckb[keyId];\r\n            if (cmdGroup == command) {\r\n                delete ckb[keyId];\r\n            } else if (Array.isArray(cmdGroup)) {\r\n                var i = cmdGroup.indexOf(command);\r\n                if (i != -1) {\r\n                    cmdGroup.splice(i, 1);\r\n                    if (cmdGroup.length == 1)\r\n                        ckb[keyId] = cmdGroup[0];\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    this.bindKey = function(key, command, position) {\r\n        if (typeof key == \"object\") {\r\n            if (position == undefined)\r\n                position = key.position;\r\n            key = key[this.platform];\r\n        }\r\n        if (!key)\r\n            return;\r\n        if (typeof command == \"function\")\r\n            return this.addCommand({exec: command, bindKey: key, name: command.name || key});\r\n        \r\n        key.split(\"|\").forEach(function(keyPart) {\r\n            var chain = \"\";\r\n            if (keyPart.indexOf(\" \") != -1) {\r\n                var parts = keyPart.split(/\\s+/);\r\n                keyPart = parts.pop();\r\n                parts.forEach(function(keyPart) {\r\n                    var binding = this.parseKeys(keyPart);\r\n                    var id = KEY_MODS[binding.hashId] + binding.key;\r\n                    chain += (chain ? \" \" : \"\") + id;\r\n                    this._addCommandToBinding(chain, \"chainKeys\");\r\n                }, this);\r\n                chain += \" \";\r\n            }\r\n            var binding = this.parseKeys(keyPart);\r\n            var id = KEY_MODS[binding.hashId] + binding.key;\r\n            this._addCommandToBinding(chain + id, command, position);\r\n        }, this);\r\n    };\r\n    \r\n    function getPosition(command) {\r\n        return typeof command == \"object\" && command.bindKey\r\n            && command.bindKey.position || 0;\r\n    }\r\n    this._addCommandToBinding = function(keyId, command, position) {\r\n        var ckb = this.commandKeyBinding, i;\r\n        if (!command) {\r\n            delete ckb[keyId];\r\n        } else if (!ckb[keyId] || this.$singleCommand) {\r\n            ckb[keyId] = command;\r\n        } else {\r\n            if (!Array.isArray(ckb[keyId])) {\r\n                ckb[keyId] = [ckb[keyId]];\r\n            } else if ((i = ckb[keyId].indexOf(command)) != -1) {\r\n                ckb[keyId].splice(i, 1);\r\n            }\r\n\r\n            if (typeof position != \"number\") {\r\n                if (position || command.isDefault)\r\n                    position = -100;\r\n                else\r\n                   position = getPosition(command);\r\n            }\r\n            var commands = ckb[keyId];\r\n            for (i = 0; i < commands.length; i++) {\r\n                var other = commands[i];\r\n                var otherPos = getPosition(other);\r\n                if (otherPos > position)\r\n                    break;\r\n            }\r\n            commands.splice(i, 0, command);\r\n        }\r\n    };\r\n\r\n    this.addCommands = function(commands) {\r\n        commands && Object.keys(commands).forEach(function(name) {\r\n            var command = commands[name];\r\n            if (!command)\r\n                return;\r\n            \r\n            if (typeof command === \"string\")\r\n                return this.bindKey(command, name);\r\n\r\n            if (typeof command === \"function\")\r\n                command = { exec: command };\r\n\r\n            if (typeof command !== \"object\")\r\n                return;\r\n\r\n            if (!command.name)\r\n                command.name = name;\r\n\r\n            this.addCommand(command);\r\n        }, this);\r\n    };\r\n\r\n    this.removeCommands = function(commands) {\r\n        Object.keys(commands).forEach(function(name) {\r\n            this.removeCommand(commands[name]);\r\n        }, this);\r\n    };\r\n\r\n    this.bindKeys = function(keyList) {\r\n        Object.keys(keyList).forEach(function(key) {\r\n            this.bindKey(key, keyList[key]);\r\n        }, this);\r\n    };\r\n\r\n    this._buildKeyHash = function(command) {\r\n        this.bindKey(command.bindKey, command);\r\n    };\r\n\r\n    // accepts keys in the form ctrl+Enter or ctrl-Enter\r\n    // keys without modifiers or shift only \r\n    this.parseKeys = function(keys) {\r\n        var parts = keys.toLowerCase().split(/[\\-\\+]([\\-\\+])?/).filter(function(x){return x});\r\n        var key = parts.pop();\r\n\r\n        var keyCode = keyUtil[key];\r\n        if (keyUtil.FUNCTION_KEYS[keyCode])\r\n            key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();\r\n        else if (!parts.length)\r\n            return {key: key, hashId: -1};\r\n        else if (parts.length == 1 && parts[0] == \"shift\")\r\n            return {key: key.toUpperCase(), hashId: -1};\r\n\r\n        var hashId = 0;\r\n        for (var i = parts.length; i--;) {\r\n            var modifier = keyUtil.KEY_MODS[parts[i]];\r\n            if (modifier == null) {\r\n                if (typeof console != \"undefined\")\r\n                    console.error(\"invalid modifier \" + parts[i] + \" in \" + keys);\r\n                return false;\r\n            }\r\n            hashId |= modifier;\r\n        }\r\n        return {key: key, hashId: hashId};\r\n    };\r\n\r\n    this.findKeyCommand = function findKeyCommand(hashId, keyString) {\r\n        var key = KEY_MODS[hashId] + keyString;\r\n        return this.commandKeyBinding[key];\r\n    };\r\n\r\n    this.handleKeyboard = function(data, hashId, keyString, keyCode) {\r\n        var key = KEY_MODS[hashId] + keyString;\r\n        var command = this.commandKeyBinding[key];\r\n        if (data.$keyChain) {\r\n            data.$keyChain += \" \" + key;\r\n            command = this.commandKeyBinding[data.$keyChain] || command;\r\n        }\r\n        \r\n        if (command) {\r\n            if (command == \"chainKeys\" || command[command.length - 1] == \"chainKeys\") {\r\n                data.$keyChain = data.$keyChain || key;\r\n                return {command: \"null\"};\r\n            }\r\n        }\r\n        \r\n        if (data.$keyChain) {\r\n            if ((!hashId || hashId == 4) && keyString.length == 1)\r\n                data.$keyChain = data.$keyChain.slice(0, -key.length - 1); // wait for input\r\n            else if (hashId == -1 || keyCode > 0)\r\n                data.$keyChain = \"\"; // reset keyChain\r\n        }\r\n        return {command: command};\r\n    };\r\n    \r\n    this.getStatusText = function(editor, data) {\r\n        return data.$keyChain || \"\";\r\n    };\r\n\r\n}).call(HashHandler.prototype);\r\n\r\nexports.HashHandler = HashHandler;\r\nexports.MultiHashHandler = MultiHashHandler;\r\n});\r\n","/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\n/*\r\n * I hate doing this, but we need some way to determine if the user is on a Mac\r\n * The reason is that users have different expectations of their key combinations.\r\n *\r\n * Take copy as an example, Mac people expect to use CMD or APPLE + C\r\n * Windows folks expect to use CTRL + C\r\n */\r\nexports.OS = {\r\n    LINUX: \"LINUX\",\r\n    MAC: \"MAC\",\r\n    WINDOWS: \"WINDOWS\"\r\n};\r\n\r\n/*\r\n * Return an exports.OS constant\r\n */\r\nexports.getOS = function() {\r\n    if (exports.isMac) {\r\n        return exports.OS.MAC;\r\n    } else if (exports.isLinux) {\r\n        return exports.OS.LINUX;\r\n    } else {\r\n        return exports.OS.WINDOWS;\r\n    }\r\n};\r\n\r\n// this can be called in non browser environments (e.g. from ace/requirejs/text)\r\nif (typeof navigator != \"object\")\r\n    return;\r\n\r\nvar os = (navigator.platform.match(/mac|win|linux/i) || [\"other\"])[0].toLowerCase();\r\nvar ua = navigator.userAgent;\r\n\r\n// Is the user using a browser that identifies itself as Windows\r\nexports.isWin = (os == \"win\");\r\n\r\n// Is the user using a browser that identifies itself as Mac OS\r\nexports.isMac = (os == \"mac\");\r\n\r\n// Is the user using a browser that identifies itself as Linux\r\nexports.isLinux = (os == \"linux\");\r\n\r\n// Windows Store JavaScript apps (aka Metro apps written in HTML5 and JavaScript) do not use the \"Microsoft Internet Explorer\" string in their user agent, but \"MSAppHost\" instead.\r\nexports.isIE = \r\n    (navigator.appName == \"Microsoft Internet Explorer\" || navigator.appName.indexOf(\"MSAppHost\") >= 0)\r\n    ? parseFloat((ua.match(/(?:MSIE |Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1])\r\n    : parseFloat((ua.match(/(?:Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1]); // for ie\r\n    \r\nexports.isOldIE = exports.isIE && exports.isIE < 9;\r\n\r\n// Is this Firefox or related?\r\nexports.isGecko = exports.isMozilla = (window.Controllers || window.controllers) && window.navigator.product === \"Gecko\";\r\n\r\n// oldGecko == rev < 2.0 \r\nexports.isOldGecko = exports.isGecko && parseInt((ua.match(/rv\\:(\\d+)/)||[])[1], 10) < 4;\r\n\r\n// Is this Opera \r\nexports.isOpera = window.opera && Object.prototype.toString.call(window.opera) == \"[object Opera]\";\r\n\r\n// Is the user using a browser that identifies itself as WebKit \r\nexports.isWebKit = parseFloat(ua.split(\"WebKit/\")[1]) || undefined;\r\n\r\nexports.isChrome = parseFloat(ua.split(\" Chrome/\")[1]) || undefined;\r\n\r\nexports.isAIR = ua.indexOf(\"AdobeAIR\") >= 0;\r\n\r\nexports.isIPad = ua.indexOf(\"iPad\") >= 0;\r\n\r\nexports.isTouchPad = ua.indexOf(\"TouchPad\") >= 0;\r\n\r\nexports.isChromeOS = ua.indexOf(\" CrOS \") >= 0;\r\n\r\n});\r\n",null,null,null,null,null,null,"/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nexports.last = function(a) {\r\n    return a[a.length - 1];\r\n};\r\n\r\nexports.stringReverse = function(string) {\r\n    return string.split(\"\").reverse().join(\"\");\r\n};\r\n\r\nexports.stringRepeat = function (string, count) {\r\n    var result = '';\r\n    while (count > 0) {\r\n        if (count & 1)\r\n            result += string;\r\n\r\n        if (count >>= 1)\r\n            string += string;\r\n    }\r\n    return result;\r\n};\r\n\r\nvar trimBeginRegexp = /^\\s\\s*/;\r\nvar trimEndRegexp = /\\s\\s*$/;\r\n\r\nexports.stringTrimLeft = function (string) {\r\n    return string.replace(trimBeginRegexp, '');\r\n};\r\n\r\nexports.stringTrimRight = function (string) {\r\n    return string.replace(trimEndRegexp, '');\r\n};\r\n\r\nexports.copyObject = function(obj) {\r\n    var copy = {};\r\n    for (var key in obj) {\r\n        copy[key] = obj[key];\r\n    }\r\n    return copy;\r\n};\r\n\r\nexports.copyArray = function(array){\r\n    var copy = [];\r\n    for (var i=0, l=array.length; i<l; i++) {\r\n        if (array[i] && typeof array[i] == \"object\")\r\n            copy[i] = this.copyObject( array[i] );\r\n        else \r\n            copy[i] = array[i];\r\n    }\r\n    return copy;\r\n};\r\n\r\nexports.deepCopy = function deepCopy(obj) {\r\n    if (typeof obj !== \"object\" || !obj)\r\n        return obj;\r\n    var copy;\r\n    if (Array.isArray(obj)) {\r\n        copy = [];\r\n        for (var key = 0; key < obj.length; key++) {\r\n            copy[key] = deepCopy(obj[key]);\r\n        }\r\n        return copy;\r\n    }\r\n    var cons = obj.constructor;\r\n    if (cons === RegExp)\r\n        return obj;\r\n    \r\n    copy = cons();\r\n    for (var key in obj) {\r\n        copy[key] = deepCopy(obj[key]);\r\n    }\r\n    return copy;\r\n};\r\n\r\nexports.arrayToMap = function(arr) {\r\n    var map = {};\r\n    for (var i=0; i<arr.length; i++) {\r\n        map[arr[i]] = 1;\r\n    }\r\n    return map;\r\n\r\n};\r\n\r\nexports.createMap = function(props) {\r\n    var map = Object.create(null);\r\n    for (var i in props) {\r\n        map[i] = props[i];\r\n    }\r\n    return map;\r\n};\r\n\r\n/*\r\n * splice out of 'array' anything that === 'value'\r\n */\r\nexports.arrayRemove = function(array, value) {\r\n  for (var i = 0; i <= array.length; i++) {\r\n    if (value === array[i]) {\r\n      array.splice(i, 1);\r\n    }\r\n  }\r\n};\r\n\r\nexports.escapeRegExp = function(str) {\r\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\r\n};\r\n\r\nexports.escapeHTML = function(str) {\r\n    return str.replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\r\n};\r\n\r\nexports.getMatchOffsets = function(string, regExp) {\r\n    var matches = [];\r\n\r\n    string.replace(regExp, function(str) {\r\n        matches.push({\r\n            offset: arguments[arguments.length-2],\r\n            length: str.length\r\n        });\r\n    });\r\n\r\n    return matches;\r\n};\r\n\r\n/* deprecated */\r\nexports.deferredCall = function(fcn) {\r\n    var timer = null;\r\n    var callback = function() {\r\n        timer = null;\r\n        fcn();\r\n    };\r\n\r\n    var deferred = function(timeout) {\r\n        deferred.cancel();\r\n        timer = setTimeout(callback, timeout || 0);\r\n        return deferred;\r\n    };\r\n\r\n    deferred.schedule = deferred;\r\n\r\n    deferred.call = function() {\r\n        this.cancel();\r\n        fcn();\r\n        return deferred;\r\n    };\r\n\r\n    deferred.cancel = function() {\r\n        clearTimeout(timer);\r\n        timer = null;\r\n        return deferred;\r\n    };\r\n    \r\n    deferred.isPending = function() {\r\n        return timer;\r\n    };\r\n\r\n    return deferred;\r\n};\r\n\r\n\r\nexports.delayedCall = function(fcn, defaultTimeout) {\r\n    var timer = null;\r\n    var callback = function() {\r\n        timer = null;\r\n        fcn();\r\n    };\r\n\r\n    var _self = function(timeout) {\r\n        if (timer == null)\r\n            timer = setTimeout(callback, timeout || defaultTimeout);\r\n    };\r\n\r\n    _self.delay = function(timeout) {\r\n        timer && clearTimeout(timer);\r\n        timer = setTimeout(callback, timeout || defaultTimeout);\r\n    };\r\n    _self.schedule = _self;\r\n\r\n    _self.call = function() {\r\n        this.cancel();\r\n        fcn();\r\n    };\r\n\r\n    _self.cancel = function() {\r\n        timer && clearTimeout(timer);\r\n        timer = null;\r\n    };\r\n\r\n    _self.isPending = function() {\r\n        return timer;\r\n    };\r\n\r\n    return _self;\r\n};\r\n});\r\n"],"names":["readFile","path","cb","fetch","then","r","text","catch","err","console","warn","arguments","Range","startRow","startColumn","endRow","endColumn","this","start","row","column","end","stopPropagation","propagationStopped","preventDefault","defaultPrevented","isEqual","range","toString","contains","compare","compareRange","cmp","comparePoint","p","containsRange","intersects","isEnd","isStart","setStart","setEnd","inside","insideStart","insideEnd","isMultiLine","compareStart","compareEnd","compareInside","clipRows","firstRow","lastRow","fromPoints","extend","isEmpty","clone","collapseRows","Math","max","toScreenRange","session","screenPosStart","documentToScreenPosition","screenPosEnd","moveBy","call","prototype","comparePoints","p1","p2","real","compliantExecNpcg","compliantLastIndexIncrement","Range_1","EventEmitter","EventEmitter_1","_emit","_dispatchEvent","eventName","e","_eventRegistry","_defaultHandlers","listeners","defaultHandler","length","type","slice","i","_signal","once","callback","_self","addEventListener","newCallback","removeEventListener","apply","setDefaultHandler","disabled","handlers","_disabled_","old","push","indexOf","splice","removeDefaultHandler","pop","on","capturing","off","removeListener","index","removeAllListeners","AutoCompleteView","editor","autoComplete","selectedClassName","wrap","document","createElement","listElement","className","style","display","listStyleType","position","zIndex","appendChild","show","hide","setPosition","coords","top","pageY","editorBottom","container","getBoundingClientRect","offsetHeight","bottom","left","pageX","current","child","children","childNodes","focusNext","curr","focus","nextSibling","adjustPosition","focusPrev","previousSibling","ensureFocus","firstChild","elmOuterHeight","preMargin","wrapHeight","elm","getComputedStyle","marginTop","replace","pos","offsetLeft","offsetTop","Empty","exec","RegExp","test","match","String","split","undefined","x","lastIndex","str","name","regex","array","item","from","Array","r2","source","global","ignoreCase","multiline","extended","sticky","_xregexp","captureNames","Function","bind","that","target","TypeError","args","bound","result","concat","Object","defineGetter","defineSetter","lookupGetter","lookupSetter","supportsAccessors","array_splice","prototypeOfArray","prototypeOfObject","_toString","owns","hasOwnProperty","makeArray","l","a","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","lengthBefore","deleteCount","removeCount","removed","insert","add","remove","min","tailOldPos","tailNewPos","tailCount","lengthAfterRemove","isArray","obj","createEmpty","definePropertyFallback","freezeObject","boxedString","splitString","doesDefinePropertyWork","object","defineProperty","exception","forEach","fun","toObject","self","thisp","map","filter","value","every","some","reduce","reduceRight","sought","toInteger","lastIndexOf","abs","getPrototypeOf","__proto__","constructor","getOwnPropertyDescriptor","property","descriptor","enumerable","configurable","getter","setter","get","set","getOwnPropertyNames","keys","create","empty","propertyIsEnumerable","isPrototypeOf","toLocaleString","valueOf","properties","Type","defineProperties","definePropertyWorksOnObject","definePropertyWorksOnDom","seal","freeze","preventExtensions","isSealed","isFrozen","isExtensible","returnValue","key","hasDontEnumBug","dontEnums","dontEnumsLength","ii","dontEnum","Date","now","getTime","trimBeginRegexp","trimEndRegexp","ws","n","floor","trim","o","exports","inherits","ctor","superCtor","super_","writable","mixin","implement","proto","oop","require$$0","Keys","ret","MODIFIER_KEYS","16","17","18","224","KEY_MODS","ctrl","alt","option","shift","super","meta","command","cmd","FUNCTION_KEYS","8","9","13","19","27","32","33","34","35","36","37","38","39","40","44","45","46","96","97","98","99","100","101","102","103","104","105","-13","112","113","114","115","116","117","118","119","120","121","122","123","144","145","PRINTABLE_KEYS","48","49","50","51","52","53","54","55","56","57","59","61","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","107","109","110","186","187","188","189","190","191","192","219","220","221","222","toLowerCase","parseInt","enter","escape","esc","del","mods","pow","join","keyCodeToString","keyCode","keyString","fromCharCode","keyUtil","os","ua","OS","LINUX","MAC","WINDOWS","getOS","isMac","isLinux","navigator","platform","userAgent","isWin","isIE","appName","parseFloat","isOldIE","isGecko","window","Controllers","controllers","product","isOldGecko","isOpera","opera","isWebKit","isChrome","isAIR","isIPad","isTouchPad","isChromeOS","useragent","require$$1","HashHandler","config","commands","commandKeyBinding","addCommands","$singleCommand","getPosition","bindKey","addCommand","removeCommand","_buildKeyHash","keepCommand","keyId","ckb","cmdGroup","keyPart","chain","binding","parts","parseKeys","id","hashId","_addCommandToBinding","isDefault","removeCommands","bindKeys","keyList","toUpperCase","modifier","error","findKeyCommand","handleKeyboard","data","$keyChain","getStatusText","HashHandler_1","AutoComplete","script","completionService","_this","isActive","_active","setScriptName","scriptName","view","innerHTML","compilation","cursor","matchFunc","inputText","compilationInfo","getCursorCompilation","matchText","renderer","textToScreenCoordinates","compilations","log","entries","matchCompare","b","textCompare","sort","k","showCompilation","refreshCompletions","getCursorPosition","newText","getSession","getTextRange","AceRange","action","deactivate","infos","html","info","kind","charAt","active","keyBinding","addKeyboardHandler","handler","removeKeyboardHandler","attach","sender","detach","defaultCommand","Up|Ctrl-p","Down|Ctrl-n","esc|Ctrl-g","Return|Tab","focusnext","focusprev","cancel","insertComplete","getAttribute","EditorPosition","getPositionChars","doc","getDocument","getChars","getAcePositionFromChars","chars","getCurrentCharPosition","getCurrentLeftChar","getPositionLeftChar","getPositionChar","getLinesChars","lines","count","line","getLines","getAllLines","items","_i","createLanguageServiceHost","currentDir","defaultLibFileName","compilationSettings","fileNameToScript","trace","addScript","fileName","content","scriptVersion","editRanges","isOpen","_lineStartIsDirty","getContent","getVersion","getIsOpen","setIsOpen","val","getScriptSnapshot","ts","computeLineStarts","textSnapshot","version","getText","substring","getLength","getChangeRange","oldSnapshot","unchanged","span","newLength","initialEditRangeIndex","changes","oldStartN","change0","oldEndN","newEndN","nextChange","oldStart1","oldEnd1","newEnd1","oldStart2","oldEnd2","newEnd2","updateContent","newContent","editContent","minChar","limChar","removeScript","removeAll","updateScript","Error","hasScript","editScript","getScriptContent","setCompilationSettings","settings","setScriptIsOpen","getCompilationSettings","getScriptFileNames","getCurrentDirectory","getDefaultLibFileName","getScriptVersion","importScripts","globalThis","TsProject","languageServiceHost","languageService","createLanguageService","createDocumentRegistry","tsProject","getTSProject","CompletionService","editorPos","getCompilation","charpos","isMemberCompletion","getCompletionsAtPosition","getLine","matches","getCurrentPositionCompilation","defaultFormatCodeOptions","IndentSize","TabSize","NewLineCharacter","ConvertTabsToSpaces","InsertSpaceAfterCommaDelimiter","InsertSpaceAfterSemicolonInForStatements","InsertSpaceBeforeAndAfterBinaryOperators","InsertSpaceAfterKeywordsInControlFlowStatements","InsertSpaceAfterFunctionKeywordForAnonymousFunctions","InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","PlaceOpenBraceOnNewLineForFunctions","PlaceOpenBraceOnNewLineForControlBlocks","IndentStyle","InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","ace","aceEditorPosition","signatureToolTip","originalTextInput","closuredEvents","fileNavigator","selectFileName","syncStop","refMarkers","errorMarkers","loadLibFiles","libFiles","libname","workerOnCreate","func","timeout","$worker","setTimeout","params","emit","loadContent","filename","keepExistContent","setValue","getValue","onUpdateDocument","editLanguageService","markers","getMarkers","line_count","isNewLine","markerUpdate","marker","onChangeFrontMarker","onChangeCursor","deferredShowOccurrences","schedule","ex","languageServiceIndent","lineNumber","preIndent","wordLen","getTabSize","smartIndent","getIndentationAtPosition","indent","getSelection","moveCursorLineStart","times","moveCursorToPosition","refactor","getOccurrencesAtPosition","ref","getpos","textSpan","selection","addRange","fcn","references","removeMarker","addMarker","timer","deferred","clearTimeout","isPending","enableHinter","parentElement","removeChild","textInputBound","arr","flatPos","acc","token","getTokenAt","getDefinitionAtPosition","quickInfo","getQuickInfoAtPosition","displayParts","getElement","innerText","w","onTextInput","options","entryFile","selector","edit","setTheme","setMode","wrapper","getElementById","fontSize","moveCursorTo","execCommand","prettierOptions"],"mappings":"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"}