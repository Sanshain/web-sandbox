<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="./static/css/web-pground.css">

    <style>
        .h_line,
        .v_line {
            position: fixed;
            color: transparent;
            border: none;
        }

        .h_line {
            left: 0;
            top: 44.7vh;
            width: 50%;
            /* width: 100%; */

            cursor: s-resize;
            /* cursor: row-resize;
            cursor: n-resize; */
            height: .5em;
            /* background-color: hotpink; */
        }

        .v_line {
            top: 0;
            cursor: e-resize;
            height: 45.5vh;
            width: 0.5em;
            /* background-color: green; */
        }

        .center_line {
            position: fixed;
            /* cursor: nwse-resize; */
            cursor: all-scroll;
            width: 1em;
            height: 1em;
            top: 44.7vh;
            /* background-color: red; */
        }
    </style>
</head>

<body>

    <div class="md_container">

        <div class="editor" id="htmleditor"></div>
        <div class="editor" id="csseditor"></div>

        <hr class="h_line">
        <div class="center_line"></div>
        <div class="v_line"></div>

        <div class="editor" id="jseditor"></div>
        <div class="view">
            <div class="expand" data-title="Expand"></div>
        </div>


        <div class="play" title="RUN (press F9)"></div>
    </div>
    <hr>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.14/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.14/ext-language_tools.min.js"></script>

    <!-- <script src="https://pagecdn.io/lib/ace/1.4.5/ace.js"></script> -->
    <!-- <script src="./ace.js"></script> -->

    <!-- <script src="./build/editor.js"></script> -->
    <!-- <script src="./source/ace_initialize.js"></script> -->

    <script src="./build/page_builder.js"></script>

    <script>

        let hrSplitter = document.querySelector('.h_line');
        let vertSplitter = document.querySelector('.v_line');
        let centerSplitter = document.querySelector('.center_line');

        const htmlEditor = document.getElementById('htmleditor')
        const styleEditor = document.getElementById('csseditor')
        const jsEditor = document.getElementById('jseditor')
        const editionView = document.querySelector('.view')

        let hoSeized = false;
        let vertSeized = false;
        let allSeized = false;

        const container = document.querySelector('.md_container');

        container.addEventListener('mousedown', function (event) {
            if (event.target === hrSplitter) {

                hoSeized = true;
                // let iframe = editionView.querySelector('iframe');
                // iframe.contentDocument.onmouseup = function (event) { seized = false; };
            }
            else if (event.target === vertSplitter) vertSeized = true
            else {
                allSeized = event.target === centerSplitter;
            }
        })

        container.addEventListener('mouseup', function (event) { hoSeized = vertSeized = allSeized = false; })
        container.addEventListener('mousemove', function (event) {

            if (hoSeized) hTune()
            else if (vertSeized) vTune()
            else if (allSeized) {
                hTune()
                vTune()
            }
        })



        function hTune() {
            hrSplitter.style.top = event.clientY + 'px';
            vertSplitter.style.height = event.clientY + 'px';
            centerSplitter.style.top = event.clientY + 'px';

            htmlEditor.style.height = event.clientY + 'px';
            styleEditor.style.height = event.clientY + 'px';
            jsEditor.style.height = container.offsetHeight - event.clientY + 'px'
            editionView.style.height = container.offsetHeight - event.clientY + 'px'
        }

        function vTune() {
            let pref = 14;
            let prefLine = 10;
            // let prefLine = 20;
            // let pref = 32;
            let post = 0;

            vertSplitter.style.left = event.clientX - prefLine + 'px';
            hrSplitter.style.width = event.clientX - prefLine + 'px';
            centerSplitter.style.left = event.clientX - prefLine + 'px';

            htmlEditor.style.width = event.clientX - pref + 'px';
            jsEditor.style.width = event.clientX - pref + 'px'
            styleEditor.style.width = container.offsetWidth - event.clientX + post + 'px'
            editionView.style.width = container.offsetWidth - event.clientX + post + 'px'
        }
    </script>
</body>

</html>